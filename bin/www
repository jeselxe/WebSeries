#!/usr/bin/env node

var app = require('../app');
var models = require("../models");

var PORT = 8000;

var userId;

models.sequelize.sync({force: true}).then(function(){
	return models.Usuario.create({nickname:'Pepe', password:'pepe'});
}).then(function(usuario){
	userId = usuario.id;
	return models.Serie.create({title: 'The Big Bang Theory', description: 'descripción de la serie The Big Bang Theory', UsuarioId: usuario.id});
}).then(function(serie) {
	return models.Temporada.bulkCreate([
		{season: 1, SerieId: serie.id},
		{season: 2, SerieId: serie.id},
		{season: 3, SerieId: serie.id},
		{season: 4, SerieId: serie.id},
		{season: 5, SerieId: serie.id},
		{season: 6, SerieId: serie.id},
		{season: 7, SerieId: serie.id},
		{season: 8, SerieId: serie.id},
		{season: 9, SerieId: serie.id}
	]);
}).then(function() {
	return models.Serie.create({title: 'Breaking Bad', description: 'descripción de la serie Breaking Bad', UsuarioId: userId});
}).then(function(serie) {
	return models.Temporada.bulkCreate([
		{season: 1, SerieId: serie.id},
		{season: 2, SerieId: serie.id},
		{season: 3, SerieId: serie.id},
		{season: 4, SerieId: serie.id},
		{season: 5, SerieId: serie.id}
	]);
})
.then(function(){
	app.listen(PORT, function () {
		console.log("Server running on port " + PORT);
	});
});